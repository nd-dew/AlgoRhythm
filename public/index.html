<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Strudel AI Live Coding</title>
    <script src="https://unpkg.com/@strudel/repl@latest"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="main-container">
        <div id="strudel-container">
            <strudel-editor id="strudel-editor">
            </strudel-editor>
        </div>
    </div>

<div id="history-container" class="hidden">
        </div>

    <div id="last-prompt-container"></div>

    <div class="command-bar">
        <button id="history-toggle" class="btn-secondary">ğŸ“œ</button>
        <input
            type="text"
            id="prompt-input"
            placeholder="Type a prompt like: add more bass, make it faster..."
            onkeypress="handlePromptKeypress(event)">
        <button class="btn-secondary" id="send-button" onclick="sendPrompt()">
            <span class="button-text">ğŸš€ Send</span>
            <svg class="spinner" viewBox="0 0 50 50">
                <circle class="path" cx="25" cy="25" r="20" fill="none" stroke-width="5"></circle>
            </svg>
        </button>
        <div class="controls">
            <button class="btn-primary" onclick="playCode()">â–¶ï¸ Play</button>
            <button class="btn-danger" onclick="stopCode()">â¹ï¸ Stop</button>
        </div>
    </div>

    <script>
        // Automatically focus the prompt input when the page loads
        window.addEventListener('DOMContentLoaded', () => {
            const input = document.getElementById('prompt-input');
            if (input) input.focus();
        });
    </script>
    <script src="script.js"></script>
</body>
</html>

